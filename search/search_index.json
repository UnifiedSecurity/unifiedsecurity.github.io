{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the Unified Security Lab Repository","text":"<p>For related videos, please visit: </p> This site contains information related to XCP-ng/Xen Server, such as: <p>Local Cache &amp; SR Management-  Storage Repository management in the CLI, such as Default SR, LocalCache, etc. </p>"},{"location":"ChangingLocalCache/","title":"LocalCache and SR Manipulation","text":""},{"location":"ChangingLocalCache/#changing-the-localcache-in-xcp-ngxen-server","title":"Changing the LocalCache in xcp-ng/Xen Server","text":"<p>Use case: You would like to modify, move or otherwise change the Default SR that was created either manually, or (more likely) by the xcp-ng installer. After the SR is cleared of disks, you will still receive an error upon trying to remove the SR, stating \"SR SR_IS_CACHE_SR\". </p>"},{"location":"ChangingLocalCache/#command-reference","title":"Command Reference","text":""},{"location":"ChangingLocalCache/#pool-commands","title":"Pool Commands","text":"Getting the Pool ID:<pre><code>    xe pool-list\n</code></pre> Getting the default SR in the CLI:<pre><code>    xe pool-param-get uuid=&lt;pool-uuid&gt; param-name=default-SR\n</code></pre> Setting the default SR in the CLI<pre><code>    xe pool-param-set uuid=&lt;pool-uuid&gt; default-SR=&lt;sr-uuid&gt;\n</code></pre>"},{"location":"ChangingLocalCache/#sr-commands","title":"SR Commands","text":"Getting SR Listing<pre><code>    xe sr-list //params=all for detailed info on all SR's\n</code></pre> Detailed information about a specific SR (determine where LocalCache is set)<pre><code>    xe sr-list uuid=28d40d0f-1b76-229f-26f9-6f3971ca7753 params=all\n\n        uuid ( RO): 28d40d0f-1b76-229f-26f9-6f3971ca7753\n        name-label ( RW): TempRaidArray\n        name-description ( RW): Temporary Migration RAID5 Array on SAS Drives\n        host ( RO): xcp-ng1\n        allowed-operations (SRO): VDI.enable_cbt; VDI.list_changed_blocks; unplug; plug; PBD.create; VDI.disable_cbt; update; PBD.destroy; VDI.resize; VDI.clone; VDI.data_destroy; scan; VDI.snapshot; VDI.mirror; VDI.create; VDI.destroy; VDI.set_on_boot\n        current-operations (SRO):\n        VDIs (SRO): 596da612-500d-478c-9ef0-3b5ddffd1c88; 0a50ae04-91ba-40f4-bbc9-f57a5f8347cb; 177853f3-d077-4ed7-8e7f-884d790e63ec; be7536ea-e4f7-468e-93c0-1f9bb4553ba0; d6f1e08e-9a6a-4bae-bb81-667c89c57ac2; 236542f4-4e70-4ae2-8577-c70b3e23bb53\n        PBDs (SRO): b8d2de63-f119-af28-e8be-47e14fd657aa\n        virtual-allocation ( RO): 566935683072\n        physical-utilisation ( RO): 107147882496\n        physical-size ( RO): 1180752883712\n        type ( RO): ext\n        content-type ( RO): user\n        shared ( RW): false\n        introduced-by ( RO): &lt;not in database&gt;\n        is-tools-sr ( RO): false\n        other-config (MRW): auto-scan: true\n        sm-config (MRO): devserial:\n        blobs ( RO):\n        local-cache-enabled ( RO): false\n        tags (SRW):\n        clustered ( RO): false\n</code></pre> Destroying an SR:<pre><code>    xe sr-destroy uuid=74db37ab-6b1e-d76d-e3ab-245f8c919b63\n</code></pre>"},{"location":"ChangingLocalCache/#host-commands","title":"Host Commands","text":"Disabling the host<pre><code>    xe host-disable\n</code></pre> <p>Note</p> <p>In order to disable the host, all VM's must be migrated away from the host. </p> <p>Disabling the Local Cache, host must not be enabled:<pre><code>    xe host-disable-local-storage-caching\n</code></pre> Enabling Location Storage Caching:<pre><code>    xe host-enable-local-storage-caching sr-uuid=28d40d0f-1b76-229f-26f9-6f3971ca7753\n</code></pre></p> Re-enable the Host:<pre><code>    xe host-enable\n</code></pre>"},{"location":"raid/","title":"Raid Arrays on a Xen/XCP-ng Host","text":""},{"location":"raid/#raid-array-management-general","title":"RAID Array Management - General","text":"<p>Use case: Manage and create RAID arrays on the xcp-ng/xen server host</p>"},{"location":"raid/#command-reference","title":"Command Reference","text":""},{"location":"raid/#general-information-commands","title":"General information commands:","text":"<p><code>lsblk</code> Lists the active physical devices, their raid arrays, and their SR attachments</p> <p><code>mdadm --misc -Q /dev/md0</code> //Checks the general status of a raid array, drive inclusion, etc.</p> <p><code>mdadm --detail -D /dev/md0</code> //Detailed information about the RAID array</p>"},{"location":"raid/#example-of-raid5-array-creation-using-3-drives","title":"Example of RAID5 array creation using 3 drives:","text":"<p>Create the array:</p> <pre><code>mdadm --create /dev/md0 --run --level=5 --bitmap=internal --assume-clean --raid-devices=3 --metadata=1.2 /dev/sdc /dev/sdd /dev/sde\n</code></pre> <p>To stop the md0 array, once the SR is empty and removed from the host:</p> <pre><code>mdadm --manage /dev/md0 -S\n</code></pre>"}]}